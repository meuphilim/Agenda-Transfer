import { format } from 'date-fns';
import { ptBR } from 'date-fns/locale';

interface Activity {
  clientName: string;
  startTime: string;
  endTime?: string;
  attractionName: string;
}

interface FormatMessageProps {
  driverName: string;
  date: string;
  activities: Activity[];
}

export const formatScheduleMessage = ({
  driverName,
  date,
  activities,
}: FormatMessageProps) => {
  const formattedDate = format(new Date(date), "EEEE, dd 'de' MMMM", { locale: ptBR });

  // Ordenar atividades por horário
  const sortedActivities = [...activities].sort((a, b) => a.startTime.localeCompare(b.startTime));

  // Formatar lista de atividades
  const activitiesText = sortedActivities
    .map(activity => `• ${activity.startTime}${activity.endTime ? ` - ${activity.endTime}` : ''}
  Cliente: ${activity.clientName.toUpperCase()}
  Passeio: ${activity.attractionName}`)
    .join('\n\n');

    return `Olá ${driverName}\n\nSegue sua agenda para ${formattedDate}:\n\n${activitiesText}\n\nPor favor, confirmar o recebimento e a programação.`;;
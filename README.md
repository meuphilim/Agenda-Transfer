<div align="center">

# ğŸšŒ Agenda-Transfer

### Plataforma ERP Completa para GestÃ£o de Turismo Receptivo

[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-18+-61DAFB?style=for-the-badge&logo=react&logoColor=black)](https://reactjs.org/)
[![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)](https://supabase.com/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg?style=for-the-badge)](https://opensource.org/licenses/MIT)

[Funcionalidades](#-funcionalidades-principais) â€¢
[InstalaÃ§Ã£o](#-instalaÃ§Ã£o-rÃ¡pida) â€¢
[DocumentaÃ§Ã£o](#-documentaÃ§Ã£o) â€¢
[Contribuir](#-contribuindo)

</div>

---

## ğŸ“‹ Ãndice

- [VisÃ£o Geral](#-visÃ£o-geral)
- [Funcionalidades Principais](#-funcionalidades-principais)
- [Tecnologias](#-stack-tecnolÃ³gico)
- [Arquitetura](#-arquitetura--princÃ­pios-de-design)
- [InstalaÃ§Ã£o](#-instalaÃ§Ã£o-rÃ¡pida)
- [Desenvolvimento](#-desenvolvimento)
- [Testes](#-testes--qualidade)
- [Contribuindo](#-contribuindo)
- [LicenÃ§a](#-licenÃ§a)

---

## ğŸ¯ VisÃ£o Geral

**Agenda-Transfer** Ã© uma soluÃ§Ã£o ERP empresarial desenvolvida especificamente para **revolucionar a gestÃ£o operacional de empresas de turismo receptivo**. ConstruÃ­da com tecnologias modernas e arquitetura escalÃ¡vel, a plataforma elimina processos manuais, centraliza informaÃ§Ãµes crÃ­ticas e fornece visibilidade em tempo real de todas as operaÃ§Ãµes.

### ğŸª O Desafio

Empresas de turismo receptivo enfrentam desafios Ãºnicos:
- âš¡ **OperaÃ§Ãµes fragmentadas** em planilhas, WhatsApp e sistemas desconectados
- ğŸ’¸ **Controle financeiro complexo** envolvendo mÃºltiplas agÃªncias, comissÃµes e motoristas
- ğŸ“Š **Falta de visibilidade** sobre a operaÃ§Ã£o em tempo real
- ğŸ”„ **Processos manuais** sujeitos a erros e retrabalho
- ğŸ“± **ComunicaÃ§Ã£o ineficiente** entre equipe interna e parceiros externos

### âœ¨ Nossa SoluÃ§Ã£o

<table>
<tr>
<td width="50%">

#### ğŸ® **Dashboard Operacional Inteligente**
Visualize todas as atividades do dia em tempo real com status, alertas e indicadores de performance

</td>
<td width="50%">

#### ğŸ“¦ **GestÃ£o Completa de Pacotes**
Crie, edite e acompanhe pacotes turÃ­sticos com controle de clientes, atividades e documentaÃ§Ã£o

</td>
</tr>
<tr>
<td width="50%">

#### ğŸ’° **MÃ³dulo Financeiro Robusto**
Controle receitas, despesas, comissÃµes de agÃªncias e pagamentos de motoristas com relatÃ³rios detalhados

</td>
<td width="50%">

#### ğŸ¢ **Cadastros Centralizados**
Gerencie agÃªncias parceiras, veÃ­culos, motoristas e toda a cadeia operacional em um Ãºnico lugar

</td>
</tr>
<tr>
<td colspan="2">

#### ğŸŒ **Portal de AgÃªncias Exclusivo**
Parceiros externos criam e gerenciam suas prÃ³prias reservas com autonomia total e interface dedicada

</td>
</tr>
</table>

### ğŸ“ˆ Resultados Esperados

```mermaid
graph LR
    A[Processos Manuais] -->|AutomaÃ§Ã£o| B[ReduÃ§Ã£o de 70% no tempo]
    C[Dados Fragmentados] -->|CentralizaÃ§Ã£o| D[DecisÃµes baseadas em dados]
    E[ComunicaÃ§Ã£o via WhatsApp] -->|Portal Digital| F[Rastreabilidade total]
    G[Planilhas Excel] -->|ERP Integrado| H[SeguranÃ§a e auditoria]
```

> **ğŸ’¡ Objetivo Final:** Transformar operaÃ§Ãµes caÃ³ticas em um processo previsÃ­vel, auditÃ¡vel e escalÃ¡vel, permitindo que gestores foquem no crescimento do negÃ³cio ao invÃ©s de "apagar incÃªndios".

---

## ğŸš€ Funcionalidades Principais

### ğŸ“Š Dashboard & OperaÃ§Ãµes
- âœ… VisualizaÃ§Ã£o em tempo real de todas as atividades agendadas
- âœ… Filtros avanÃ§ados por data, status, agÃªncia e motorista
- âœ… Indicadores de performance (KPIs) customizÃ¡veis
- âœ… Alertas automÃ¡ticos para conflitos e pendÃªncias

### ğŸ’¼ GestÃ£o de Pacotes
- âœ… CriaÃ§Ã£o rÃ¡pida de pacotes com templates
- âœ… Controle de mÃºltiplos clientes por pacote
- âœ… GestÃ£o de atividades individuais (transfers, passeios, etc.)
- âœ… Upload e organizaÃ§Ã£o de documentos (vouchers, contratos)
- âœ… HistÃ³rico completo de alteraÃ§Ãµes

### ğŸ’³ MÃ³dulo Financeiro
- âœ… Registro de receitas e despesas com categorizaÃ§Ã£o
- âœ… CÃ¡lculo automÃ¡tico de comissÃµes de agÃªncias
- âœ… Controle de pagamentos a motoristas
- âœ… Extrato financeiro com saldo em tempo real
- âœ… RelatÃ³rios de DRE e fluxo de caixa
- âœ… ExportaÃ§Ã£o de relatÃ³rios em PDF profissional

### ğŸ‘¥ GestÃ£o de Cadastros
- âœ… AgÃªncias parceiras com configuraÃ§Ã£o de comissÃµes
- âœ… Motoristas com documentaÃ§Ã£o e disponibilidade
- âœ… VeÃ­culos com manutenÃ§Ã£o e rastreamento
- âœ… UsuÃ¡rios com controle de permissÃµes granular

### ğŸŒ Portal de AgÃªncias
- âœ… Interface dedicada para parceiros externos
- âœ… CriaÃ§Ã£o self-service de reservas
- âœ… Acompanhamento de status em tempo real
- âœ… HistÃ³rico de transaÃ§Ãµes e comissÃµes

---

## ğŸ›  Stack TecnolÃ³gico

### Frontend
```mermaid
graph LR
    A[React 18] --> B[TypeScript 5.0+]
    B --> C[Vite]
    C --> D[Tailwind CSS]
    D --> E[shadcn/ui]
    E --> F[React Hook Form]
```

| Tecnologia | VersÃ£o | PropÃ³sito |
|:-----------|:------:|:----------|
| **React** | 18+ | UI reativa com componentes funcionais |
| **TypeScript** | 5.0+ | Type safety e melhor DX |
| **Vite** | Latest | Build tool ultra-rÃ¡pido |
| **Tailwind CSS** | 3+ | Utility-first CSS framework |
| **shadcn/ui** | Latest | Componentes acessÃ­veis e customizÃ¡veis |
| **React Hook Form** | Latest | Gerenciamento performÃ¡tico de formulÃ¡rios |
| **React Router** | 6+ | Roteamento SPA |
| **date-fns** | Latest | ManipulaÃ§Ã£o de datas |
| **jsPDF** | Latest | GeraÃ§Ã£o de relatÃ³rios PDF |

### Backend & Infraestrutura
```mermaid
graph TB
    A[Supabase] --> B[PostgreSQL 15]
    A --> C[Auth + RLS]
    A --> D[Storage]
    A --> E[RPC Functions]
    B --> F[Row Level Security]
    B --> G[Database Triggers]
```

| Tecnologia | PropÃ³sito |
|:-----------|:----------|
| **Supabase** | Backend-as-a-Service completo |
| **PostgreSQL** | Banco de dados relacional robusto |
| **Row Level Security** | SeguranÃ§a a nÃ­vel de linha |
| **RPC Functions** | LÃ³gica de negÃ³cio no servidor |
| **Supabase Auth** | AutenticaÃ§Ã£o e autorizaÃ§Ã£o |
| **Supabase Storage** | Armazenamento de arquivos |

### Testes & Qualidade
| Ferramenta | PropÃ³sito |
|:-----------|:----------|
| **Vitest** | Testes unitÃ¡rios e de integraÃ§Ã£o |
| **React Testing Library** | Testes focados no comportamento do usuÃ¡rio |
| **Playwright** | Testes E2E e regressÃ£o visual |
| **ESLint** | AnÃ¡lise estÃ¡tica de cÃ³digo |
| **TypeScript Compiler** | VerificaÃ§Ã£o de tipos |

---

## ğŸ— Arquitetura & PrincÃ­pios de Design

### PrincÃ­pios Fundamentais

#### 1ï¸âƒ£ **Backend-First Logic**
```typescript
// âŒ Evitar: LÃ³gica complexa no cliente
const calculateCommission = (value: number, rate: number) => value * rate;

// âœ… Preferir: RPC Functions no PostgreSQL
const { data } = await supabase.rpc('calculate_agency_commission', {
  package_id: id
});
```

**BenefÃ­cios:**
- âš¡ Performance superior com processamento no banco
- ğŸ”’ LÃ³gica de negÃ³cio protegida e centralizada
- ğŸ”„ TransaÃ§Ãµes atÃ´micas garantidas
- ğŸ“Š AgregaÃ§Ãµes eficientes com SQL otimizado

#### 2ï¸âƒ£ **Security-First com RLS**
```sql
-- Exemplo de polÃ­tica RLS
CREATE POLICY "Users can only see their company's packages"
ON packages FOR SELECT
USING (company_id = auth.jwt() ->> 'company_id');
```

**Camadas de SeguranÃ§a:**
- ğŸ›¡ï¸ Row Level Security como camada primÃ¡ria
- ğŸ” AutenticaÃ§Ã£o JWT com Supabase Auth
- ğŸ‘¤ AutorizaÃ§Ã£o baseada em roles
- ğŸ“ Auditoria automÃ¡tica de operaÃ§Ãµes

#### 3ï¸âƒ£ **Infrastructure as Code**
```bash
supabase/migrations/
â”œâ”€â”€ 20240101_initial_schema.sql
â”œâ”€â”€ 20240115_add_finance_tables.sql
â””â”€â”€ 20240201_add_rls_policies.sql
```

**Regra de Ouro:** 
> âš ï¸ **NUNCA altere o schema manualmente no painel do Supabase!**  
> Todas as alteraÃ§Ãµes devem ser versionadas em arquivos de migraÃ§Ã£o.

#### 4ï¸âƒ£ **Data Stitching Pattern**
```typescript
// MÃºltiplas queries especÃ­ficas
const [revenues, expenses, commissions] = await Promise.all([
  fetchRevenues(filters),
  fetchExpenses(filters),
  fetchCommissions(filters)
]);

// CombinaÃ§Ã£o no cliente
const financialSummary = combineFinancialData(revenues, expenses, commissions);
```

**Vantagens:**
- ğŸ”„ ResiliÃªncia a mudanÃ§as no schema
- ğŸ› Debug simplificado
- âš¡ ParalelizaÃ§Ã£o de queries
- ğŸ§ª Testes unitÃ¡rios mais fÃ¡ceis

---

## ğŸ“ Estrutura do Projeto

```
agenda-transfer/
â”‚
â”œâ”€â”€ ğŸ“‚ supabase/                    # Infraestrutura como cÃ³digo
â”‚   â”œâ”€â”€ migrations/                 # MigraÃ§Ãµes SQL versionadas
â”‚   â””â”€â”€ seed.sql                    # Dados iniciais para desenvolvimento
â”‚
â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”œâ”€â”€ ğŸ“‚ components/              # Componentes React
â”‚   â”‚   â”œâ”€â”€ finance/                # MÃ³dulo financeiro
â”‚   â”‚   â”œâ”€â”€ packages/               # GestÃ£o de pacotes
â”‚   â”‚   â”œâ”€â”€ ui/                     # Componentes base (shadcn/ui)
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                # Camada de acesso a dados
â”‚   â”‚   â”œâ”€â”€ financeApi.ts           # API financeira
â”‚   â”‚   â”œâ”€â”€ packagesApi.ts          # API de pacotes
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ contexts/                # Contextos React
â”‚   â”‚   â””â”€â”€ AuthContext.tsx         # AutenticaÃ§Ã£o global
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ pages/                   # PÃ¡ginas/Rotas
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Finance.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ types/                   # DefiniÃ§Ãµes TypeScript
â”‚   â”‚   â””â”€â”€ database.types.ts       # Tipos gerados do schema
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ lib/                     # ConfiguraÃ§Ãµes
â”‚       â””â”€â”€ supabase.ts             # Cliente Supabase
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                       # Testes E2E (Playwright)
â”‚
â””â”€â”€ ğŸ“„ package.json
```

---

## âš¡ InstalaÃ§Ã£o RÃ¡pida

### PrÃ©-requisitos
- Node.js >= 18.0.0
- npm >= 9.0.0
- Conta no Supabase (gratuita)

### Setup em 3 Passos

```bash
# 1. Clone e instale dependÃªncias
git clone https://github.com/seu-usuario/agenda-transfer.git
cd agenda-transfer
npm install

# 2. Configure variÃ¡veis de ambiente
cp .env.example .env
# Edite .env com suas credenciais do Supabase

# 3. Aplique migraÃ§Ãµes e inicie
npx supabase db push
npm run dev
```

ğŸ‰ **AplicaÃ§Ã£o rodando em** `http://localhost:5173`

---

## ğŸ’» Desenvolvimento

### Scripts DisponÃ­veis

| Comando | DescriÃ§Ã£o |
|:--------|:----------|
| `npm run dev` | Inicia servidor de desenvolvimento |
| `npm run build` | Build de produÃ§Ã£o |
| `npm run preview` | Preview da build de produÃ§Ã£o |
| `npm test` | Executa testes unitÃ¡rios (Vitest) |
| `npm run test:ui` | Interface visual dos testes |
| `npm run check` | Lint + Type check |
| `npx playwright test` | Testes E2E |

### Workflow de Desenvolvimento

```mermaid
graph TD
    A[Nova Feature] --> B[Criar Branch]
    B --> C{Altera Schema?}
    C -->|Sim| D[Criar MigraÃ§Ã£o]
    C -->|NÃ£o| E[Desenvolver]
    D --> E
    E --> F[Escrever Testes]
    F --> G[Verificar Qualidade]
    G --> H{CI Passou?}
    H -->|NÃ£o| E
    H -->|Sim| I[Pull Request]
    I --> J[Code Review]
    J --> K[Merge]
```

#### PadrÃ£o de Branches
- `main` - Branch principal (protegida)
- `feat/<nome>` - Novas funcionalidades
- `fix/<nome>` - CorreÃ§Ãµes de bugs
- `chore/<nome>` - Tarefas de manutenÃ§Ã£o

#### Commits Convencionais
```bash
feat: add financial statement export to PDF
fix: resolve balance calculation on date filter
chore: update dependencies
docs: improve README architecture section
```

### Criando uma MigraÃ§Ã£o

```bash
# Gerar timestamp
date +"%Y%m%d%H%M%S"

# Criar arquivo
touch supabase/migrations/$(date +"%Y%m%d%H%M%S")_add_new_feature.sql

# Escrever SQL
-- Adicionar tabelas, RLS policies, funÃ§Ãµes, etc.

# Aplicar localmente
npx supabase db push
```

---

## ğŸ§ª Testes & Qualidade

### PirÃ¢mide de Testes

```
        /\
       /E2E\        â† Poucos testes crÃ­ticos de fluxo
      /------\
     /  INTEG \     â† Testes de integraÃ§Ã£o de serviÃ§os
    /----------\
   /   UNITÃRIOS  \ â† Muitos testes de lÃ³gica isolada
  /----------------\
```

### Executando Testes

```bash
# Testes unitÃ¡rios (watch mode)
npm test

# Testes com cobertura
npm run test:coverage

# Testes E2E
npx playwright test

# Modo visual (debug)
npx playwright test --ui
```

### PadrÃµes de Qualidade

- âœ… **Cobertura mÃ­nima:** 80% para serviÃ§os crÃ­ticos
- âœ… **Type safety:** Zero erros do TypeScript
- âœ… **Lint:** Zero avisos do ESLint
- âœ… **E2E:** Fluxos crÃ­ticos cobertos

---

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Para contribuir:

1. ğŸ´ Fork o projeto
2. ğŸŒ¿ Crie uma branch (`git checkout -b feat/amazing-feature`)
3. âœï¸ Commit suas mudanÃ§as (`git commit -m 'feat: add amazing feature'`)
4. ğŸ“¤ Push para a branch (`git push origin feat/amazing-feature`)
5. ğŸ”ƒ Abra um Pull Request

### Checklist do PR

- [ ] CÃ³digo segue os padrÃµes do projeto
- [ ] Testes passando (`npm test`)
- [ ] Type check sem erros (`npm run check`)
- [ ] MigraÃ§Ã£o criada (se alterou schema)
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Commits seguem padrÃ£o convencional

---

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a **MIT License** - veja o arquivo [LICENSE](LICENSE) para detalhes.

---

<div align="center">

### ğŸŒŸ Se este projeto te ajudou, considere dar uma estrela!


[â¬† Voltar ao topo](#-agenda-transfer)

</div>
